<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BioTetris ‚Äì Principles of Life</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:system-ui, Arial, sans-serif;
  background:#0b1020;
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
}
h1{margin:10px}
.container{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}
canvas{background:#111;border:2px solid #444}
.panel{
  max-width:360px;
  background:#151a33;
  padding:14px;
  border-radius:12px;
}
.choice{
  display:block;
  width:100%;
  margin-top:8px;
  padding:8px;
  background:#2c315c;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.correct{background:#2ecc71}
.wrong{background:#e74c3c}
.small{font-size:13px;color:#bbb}
</style>
</head>

<body>
<h1>üß¨ BioTetris: Principles of Life</h1>
<div class="small">Clear a line ‚Üí answer a question from your biology unit</div>

<div class="container">
<canvas id="game" width="240" height="480"></canvas>

<div class="panel">
<h3>Biology Checkpoint</h3>
<div id="question">Clear a line to unlock a question.</div>
<div id="choices"></div>
<p id="explain" class="small"></p>
<hr>
<p class="small">
‚å® Controls:<br>
‚Üê ‚Üí move ¬∑ ‚Üë rotate ¬∑ ‚Üì drop ¬∑ Space = hard drop
</p>
</div>
</div>

<script>
/* ===== QUESTIONS FROM YOUR PDF ===== */
const QUESTIONS = [
{
q:"What is an ecosystem?",
c:[
"All living organisms and the non-living environment they interact with",
"Only plants in an area",
"Only animals in an area",
"A single species population"
],
a:0,
e:"An ecosystem includes biotic (living) and abiotic (non-living) factors."
},
{
q:"Which of the following is an abiotic factor?",
c:["Predators","Bacteria","Temperature","Competition"],
a:2,
e:"Abiotic factors are non-living, such as temperature, light, and pH."
},
{
q:"Which organisms act as decomposers in ecosystems?",
c:["Plants","Herbivores","Fungi and bacteria","Carnivores"],
a:2,
e:"Decomposers recycle nutrients back into the environment."
},
{
q:"What is a hypothesis?",
c:[
"A proven fact",
"An educated, testable prediction",
"A random guess",
"A conclusion"
],
a:1,
e:"A hypothesis is an educated prediction based on observations."
},
{
q:"Which statement is part of cell theory?",
c:[
"All cells have a cell wall",
"Cells arise from existing cells",
"Cells are not living",
"Only animals are made of cells"
],
a:1,
e:"Cell theory states that new cells come from existing cells."
},
{
q:"Which biomolecule is the main source of energy in respiration?",
c:["Proteins","Lipids","Carbohydrates","Nucleic acids"],
a:2,
e:"Carbohydrates such as glucose are used in respiration."
},
{
q:"Which biomolecule forms cell membranes?",
c:["Proteins","Lipids","Carbohydrates","DNA"],
a:1,
e:"Lipids (phospholipids) form cell membranes."
},
{
q:"Enzymes are important because they‚Ä¶",
c:[
"Are used up in reactions",
"Slow reactions down",
"Speed up chemical reactions",
"Make energy directly"
],
a:2,
e:"Enzymes are biological catalysts."
},
{
q:"Where does aerobic respiration mainly occur?",
c:["Nucleus","Mitochondria","Ribosomes","Cell wall"],
a:1,
e:"Mitochondria release energy (ATP) in respiration."
},
{
q:"Osmosis is best described as‚Ä¶",
c:[
"Movement of glucose using energy",
"Movement of water across a partially permeable membrane",
"Movement of oxygen in blood",
"Movement of ions against a gradient"
],
a:1,
e:"Osmosis is the diffusion of water through a partially permeable membrane."
}
];

/* ===== TETRIS ENGINE ===== */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const COLS=10,ROWS=20,SIZE=24;
let grid=[...Array(ROWS)].map(()=>Array(COLS).fill(0));

const SHAPES=[
[[1,1,1,1]],
[[1,1],[1,1]],
[[0,1,0],[1,1,1]],
[[1,1,0],[0,1,1]],
[[0,1,1],[1,1,0]]
];

let piece,newQuestion=true;

function newPiece(){
const s=SHAPES[Math.floor(Math.random()*SHAPES.length)];
return{s,x:3,y:0};
}
piece=newPiece();

function collide(px,py,ps){
for(let y=0;y<ps.length;y++)
for(let x=0;x<ps[y].length;x++)
if(ps[y][x]){
let nx=px+x,ny=py+y;
if(nx<0||nx>=COLS||ny>=ROWS||grid[ny]?.[nx])return true;
}
return false;
}

function merge(){
piece.s.forEach((r,y)=>r.forEach((v,x)=>{
if(v)grid[piece.y+y][piece.x+x]=1;
}));
}

function clearLines(){
let cleared=0;
grid=grid.filter(r=>{
if(r.every(v=>v)){cleared++;return false;}
return true;
});
while(grid.length<ROWS)grid.unshift(Array(COLS).fill(0));
if(cleared>0)askQuestion();
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
grid.forEach((r,y)=>r.forEach((v,x)=>{
if(v){ctx.fillStyle="#4ef0a3";ctx.fillRect(x*SIZE,y*SIZE,SIZE,SIZE);}
}));
piece.s.forEach((r,y)=>r.forEach((v,x)=>{
if(v){ctx.fillStyle="#ffd166";ctx.fillRect((piece.x+x)*SIZE,(piece.y+y)*SIZE,SIZE,SIZE);}
}));
}

function drop(){
if(!collide(piece.x,piece.y+1,piece.s))piece.y++;
else{
merge();
clearLines();
piece=newPiece();
if(collide(piece.x,piece.y,piece.s)){
alert("Game Over");
location.reload();
}
}
draw();
}

setInterval(drop,600);

/* ===== CONTROLS ===== */
document.addEventListener("keydown",e=>{
if(e.key==="ArrowLeft"&&!collide(piece.x-1,piece.y,piece.s))piece.x--;
if(e.key==="ArrowRight"&&!collide(piece.x+1,piece.y,piece.s))piece.x++;
if(e.key==="ArrowDown")drop();
if(e.key==="ArrowUp"){
const r=piece.s[0].map((_,i)=>piece.s.map(r=>r[i]).reverse());
if(!collide(piece.x,piece.y,r))piece.s=r;
}
if(e.key===" ")while(!collide(piece.x,piece.y+1,piece.s))piece.y++;
draw();
});

/* ===== QUIZ ===== */
function askQuestion(){
if(!newQuestion)return;
newQuestion=false;
const q=QUESTIONS[Math.floor(Math.random()*QUESTIONS.length)];
document.getElementById("question").textContent=q.q;
const c=document.getElementById("choices");
c.innerHTML="";
q.c.forEach((t,i)=>{
const b=document.createElement("button");
b.textContent=t;
b.className="choice";
b.onclick=()=>{
document.getElementById("explain").textContent=q.e;
b.classList.add(i===q.a?"correct":"wrong");
newQuestion=true;
};
c.appendChild(b);
});
}

draw();
</script>
</body>
</html>
